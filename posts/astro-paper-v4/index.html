<!DOCTYPE html><html dir="ltr" lang="en" class="scroll-smooth" data-theme="light" data-astro-cid-rukyjoxm> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://astro-paper.pages.dev/posts/astro-paper-v4/"><meta name="generator" content="Astro v5.10.0"><!-- General Meta Tags --><title>AstroPaper 4.0 | Tấn Đạt</title><meta name="title" content="AstroPaper 4.0 | Tấn Đạt"><meta name="description" content="AstroPaper v4: ensuring a smoother and more feature-rich blogging experience."><meta name="author" content="Sat Naing"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="AstroPaper 4.0 | Tấn Đạt"><meta property="og:description" content="AstroPaper v4: ensuring a smoother and more feature-rich blogging experience."><meta property="og:url" content="https://astro-paper.pages.dev/posts/astro-paper-v4/"><meta property="og:image" content="https://astro-paper.pages.dev/_astro/AstroPaper-v4.TylavUIc.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2024-01-04T09:30:41.816Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://astro-paper.pages.dev/posts/astro-paper-v4/"><meta property="twitter:title" content="AstroPaper 4.0 | Tấn Đạt"><meta property="twitter:description" content="AstroPaper v4: ensuring a smoother and more feature-rich blogging experience."><meta property="twitter:image" content="https://astro-paper.pages.dev/_astro/AstroPaper-v4.TylavUIc.png"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"AstroPaper 4.0 | Tấn Đạt","image":"https://astro-paper.pages.dev/_astro/AstroPaper-v4.TylavUIc.png","datePublished":"2024-01-04T09:30:41.816Z","author":[{"@type":"Person","name":"Sat Naing","url":"https://satnaing.dev/"}]}</script><!-- Enable RSS feed auto-discovery  --><link rel="alternate" type="application/rss+xml" title="Tấn Đạt" href="https://astro-paper.pages.dev/rss.xml"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CtSceO8m.js"></script><script src="/toggle-theme.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><link rel="stylesheet" href="/_astro/index.DrCFPTw_.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
html,body{margin:0;width:100%;height:100%}
:where([data-astro-image]){object-fit:var(--fit);object-position:var(--pos);height:auto}:where([data-astro-image=full-width]){width:100%}:where([data-astro-image=constrained]){max-width:100%}
</style><style>[data-astro-transition-scope="astro-k2bikm2e-1"] { view-transition-name: astro-paper-4-0; }@layer astro { ::view-transition-old(astro-paper-4-0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(astro-paper-4-0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(astro-paper-4-0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(astro-paper-4-0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-k2bikm2e-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-k2bikm2e-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-k2bikm2e-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-k2bikm2e-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-k2bikm2e-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-k2bikm2e-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-k2bikm2e-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-k2bikm2e-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: release; }@layer astro { ::view-transition-old(release) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(release) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(release) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(release) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-rukyjoxm>  <header class="sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border shadow-sm"> <a id="skip-to-content" href="#main-content" class="absolute start-16 -top-full z-50 bg-accent text-background px-3 py-1 rounded text-sm font-medium transition-all focus:top-2 hover:bg-accent/90">
Skip to content
</a> <div class="max-w-6xl mx-auto px-6"> <div class="flex items-center justify-between py-4"> <!-- Logo/Brand --> <a href="/" class="text-xl font-bold text-foreground hover:text-accent transition-colors"> Tấn Đạt </a> <!-- Desktop Navigation --> <nav class="hidden sm:flex items-center space-x-2"> <a href="/posts" class="px-4 py-2 text-sm font-medium transition-colors hover:bg-muted hover:text-accent rounded-md bg-muted text-accent">
Bài Học
</a> <a href="/tags" class="px-4 py-2 text-sm font-medium transition-colors hover:bg-muted hover:text-accent rounded-md">
Thẻ
</a> <a href="/about" class="px-4 py-2 text-sm font-medium transition-colors hover:bg-muted hover:text-accent rounded-md">
Giới Thiệu
</a> <a href="/archives" class="inline-block hover:text-accent p-2 hover:text-accent transition-colors" aria-label="archives" title="Archives"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg> </a> <a href="/search" class="inline-block hover:text-accent p-2 hover:text-accent transition-colors" aria-label="search" title="Search"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg> </a> <button id="theme-btn" class="p-2 hover:text-accent transition-colors" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg> </button> </nav> <!-- Mobile Menu Button --> <button id="menu-btn" class="sm:hidden p-2 hover:text-accent transition-colors" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden w-6 h-6" id="close-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6" id="menu-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" /></svg> </button> </div> <!-- Mobile Navigation --> <nav id="menu-items" class="hidden sm:hidden pb-4"> <div class="grid grid-cols-2 gap-2"> <a href="/posts" class="block px-4 py-3 text-center font-medium rounded-lg transition-colors hover:bg-muted text-accent bg-muted">
Posts
</a> <a href="/tags" class="block px-4 py-3 text-center font-medium rounded-lg transition-colors hover:bg-muted">
Tags
</a> <a href="/about" class="block px-4 py-3 text-center font-medium rounded-lg transition-colors hover:bg-muted">
About
</a> <a href="/archives" class="flex items-center justify-center px-4 py-3 font-medium rounded-lg transition-colors hover:bg-muted"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg>
Archives
</a> <a href="/search" class="flex items-center justify-center px-4 py-3 font-medium rounded-lg transition-colors hover:bg-muted"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>
Search
</a> <button id="theme-btn-mobile" class="flex items-center justify-center px-4 py-3 font-medium rounded-lg transition-colors hover:bg-muted" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2 absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg>
Theme
</button> </div> </nav> </div> </header> <script type="module">function s(){const e=document.querySelector("#menu-btn"),t=document.querySelector("#menu-items"),n=document.querySelector("#menu-icon"),o=document.querySelector("#close-icon");!e||!t||!n||!o||e.addEventListener("click",()=>{const c=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",c?"false":"true"),e.setAttribute("aria-label",c?"Open Menu":"Close Menu"),t.classList.toggle("hidden"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})}s();document.addEventListener("astro:after-swap",s);</script> <div class="mx-auto flex w-full max-w-app items-center justify-start px-2"><a id="back-button" href="/" class="inline-block hover:text-accent focus-outline mt-8 mb-2 flex hover:text-foreground/75"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg><span>Go back</span></a></div><script type="module">function o(){const t=document.querySelector("#back-button"),e=sessionStorage.getItem("backUrl");e&&t&&(t.href=e)}document.addEventListener("astro:page-load",o);o();</script> <main id="main-content" class="min-h-screen" data-pagefind-body> <div class="w-full px-8 py-8"> <div class="flex gap-8"> <!-- Main Content --> <div class="flex-1"> <h1 class="block text-2xl font-bold text-accent sm:text-3xl mb-4" data-astro-transition-scope="astro-k2bikm2e-1"> AstroPaper 4.0 </h1> <div class="my-2 flex items-center gap-2"> <div class="flex items-center gap-x-2 opacity-80"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 min-w-[1.375rem]"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 14h.013" /><path d="M10.01 14h.005" /><path d="M13.01 14h.005" /><path d="M16.015 14h.005" /><path d="M13.015 17h.005" /><path d="M7.01 17h.005" /><path d="M10.01 17h.005" /></svg>  <time class="text-sm sm:text-base" datetime="2024-01-04T09:30:41.816Z">4 Jan, 2024</time> </div> <span aria-hidden="true" class="max-sm:hidden">|</span> <a href="https://github.com/satnaing/astro-paper/edit/main/src/data/blog/_releases/astro-paper-4.md" target="_blank" rel="noopener noreferrer" class="flex justify-baseline gap-1.5 opacity-80 hover:text-accent max-sm:hidden"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span>Edit page</span></a> </div> <article id="article" class="app-prose mt-8 w-full prose-pre:bg-(--shiki-light-bg) dark:prose-pre:bg-(--shiki-dark-bg)"> <p>Hello everyone! Wishing you a happy New Year 🎉 and all the best for 2024! We’re excited to announce the release of AstroPaper v4, a significant update that introduces a range of new features, improvements, and bug fixes to elevate your blogging experience. A big thank you to all the contributors for their valuable input and efforts in making version 4 possible!</p>
<p><img alt="AstroPaper v4" loading="lazy" decoding="async" fetchpriority="auto" sizes="(min-width: 1920px) 1920px, 100vw"  data-astro-image="constrained" width="1920" height="1080" src="/_astro/AstroPaper-v4.TylavUIc_2hhsBs.webp" srcset="/_astro/AstroPaper-v4.TylavUIc_Z2wthRa.webp 640w, /_astro/AstroPaper-v4.TylavUIc_1Vhac9.webp 750w, /_astro/AstroPaper-v4.TylavUIc_Z1bnS8x.webp 828w, /_astro/AstroPaper-v4.TylavUIc_Q2Dk6.webp 1080w, /_astro/AstroPaper-v4.TylavUIc_Z1U2yb0.webp 1280w, /_astro/AstroPaper-v4.TylavUIc_1MXnUI.webp 1668w, /_astro/AstroPaper-v4.TylavUIc_2hhsBs.webp 1920w"></p>
<h2 id="table-of-contents">Table of contents</h2>
<p></p><details><summary>Open Table of contents</summary><p></p>
<ul>
<li><a href="#major-changes">Major Changes</a>
<ul>
<li><a href="#upgrade-to-astro-v4-202">Upgrade to Astro v4 #202</a></li>
<li><a href="#replace-postslug-with-astro-content-slug-197">Replace <code>postSlug</code> with Astro Content <code>slug</code> #197</a></li>
</ul>
</li>
<li><a href="#new-features">New Features</a>
<ul>
<li><a href="#add-code-snippets-for-content-creation-206">Add code-snippets for content creation #206</a></li>
<li><a href="#add-modified-datetime-in-blog-posts-195">Add Modified Datetime in Blog Posts #195</a></li>
<li><a href="#implement-back-to-top-button-188">Implement Back-to-Top Button #188</a></li>
<li><a href="#add-pagination-in-tag-posts-201">Add Pagination in Tag Posts #201</a></li>
<li><a href="#dynamically-generate-robotstxt-130">Dynamically Generate robots.txt #130</a></li>
<li><a href="#add-docker-compose-file-174">Add Docker-Compose File #174</a></li>
</ul>
</li>
<li><a href="#refactoring--bug-fixes">Refactoring &#x26; Bug Fixes</a>
<ul>
<li><a href="#replace-slugified-title-with-unslugified-tag-name-198">Replace Slugified Title with Unslugified Tag Name #198</a></li>
<li><a href="#implement-100svh-for-min-height-79d569d">Implement 100svh for Min-Height (79d569d)</a></li>
<li><a href="#update-site-url-as-single-source-of-truth-143">Update Site URL as Single Source of Truth #143</a></li>
<li><a href="#solve-invisible-text-code-block-issue-in-light-mode-163">Solve Invisible Text Code Block Issue in Light Mode #163</a></li>
<li><a href="#decode-unicode-tag-characters-in-breadcrumb-175">Decode Unicode Tag Characters in Breadcrumb #175</a></li>
<li><a href="#update-locale-config-to-cover-overall-locales-cd02b04">Update LOCALE Config to Cover Overall Locales (cd02b04)</a></li>
</ul>
</li>
<li><a href="#outtro">Outtro</a></li>
</ul>
<p></p></details><p></p>
<h2 id="major-changes">Major Changes</h2>
<h3 id="upgrade-to-astro-v4-202">Upgrade to Astro v4 <a href="https://github.com/satnaing/astro-paper/pull/202">#202</a></h3>
<p>AstroPaper now leverages the power and capabilities of Astro v4. However, it’s a subtle upgrade and won’t break most Astro users.</p>
<p><img src="https://astro.build/_astro/header-astro-4.YunweN9V_OmV0l.webp" alt="Astro v4"></p>
<h3 id="replace-postslug-with-astro-content-slug-197">Replace <code>postSlug</code> with Astro Content <code>slug</code> <a href="https://github.com/satnaing/astro-paper/pull/197">#197</a></h3>
<p>The <code>postSlug</code> in the blog content schema is no longer available in AstroPaper v4. Initially Astro doesn’t have a <code>slug</code> mechanism and thus we have to figure it out on our own. Since Astro v3, it supports content collection and slug features. Now, we believe it’s time to adopt Astro’s out-of-the-box <code>slug</code> feature.</p>
<p><strong><em>file: src/content/blog/astro-paper-4.md</em></strong></p>
<pre class="astro-code astro-code-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">author:</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D"> Sat</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D"> Naing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">pubDatetime:</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D"> 2024-01-01T04:35:33.428Z</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">title:</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D"> AstroPaper</span><span style="--shiki-light:#1976D2;--shiki-dark:#F78C6C"> 4.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">slug:</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD"> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D">astro-paper-v4</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD">"</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"> # if slug is not specified, it will be 'astro-paper-4' (file name).</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"># slug: "" ❌ cannot be an empty string</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">---</span></span></code></pre>
<p>The behavior of the <code>slug</code> is slightly different now. In the previous versions of AstroPaper, if the <code>postSlug</code> is not specified in a blog post (markdown file), the title of that blog post would be slugified and used as the <code>slug</code>. However, in AstroPaper v4, if the <code>slug</code> field is not specified, the markdown file name will be used as the <code>slug</code>. One thing to keep in mind is that the <code>slug</code> field can be omitted, but it cannot be an empty string (slug: "" ❌).</p>
<p>If you’re upgrading AstroPaper from v3 to v4, make sure to replace <code>postSlug</code> in your <code>src/content/blog/*.md</code> files with <code>slug</code>.</p>
<h2 id="new-features">New Features</h2>
<h3 id="add-code-snippets-for-content-creation-206">Add code-snippets for content creation <a href="https://github.com/satnaing/astro-paper/pull/206">#206</a></h3>
<p>AstroPaper now includes VSCode snippets for new blog posts, eliminating the need for manual copy/pasting of the frontmatter and content structure (table of contents, heading, excerpt, etc.).</p>
<p>Read more about VSCode Snippets <a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#:~:text=In%20Visual%20Studio%20Code%2C%20snippets,Snippet%20in%20the%20Command%20Palette">here</a>.</p>
<video autoplay muted controls plays-inline="true" class="border border-skin-line">
  <source src="https://github.com/satnaing/astro-paper/assets/53733092/136f1903-bade-40a2-b6bb-285a3c726350" type="video/mp4">
</video>
<h3 id="add-modified-datetime-in-blog-posts-195">Add Modified Datetime in Blog Posts <a href="https://github.com/satnaing/astro-paper/pull/195">#195</a></h3>
<p>Keep readers informed about the latest updates by displaying the modified datetime in blog posts. This not only instills user trust in the freshness of the articles but also contributes to improved SEO for the blog.</p>
<p><img src="https://github.com/satnaing/astro-paper/assets/53733092/cc89585e-148e-444d-9da1-0d496e867175" alt="Last Modified Date feature in AstroPaper"></p>
<p>You can add a <code>modDatetime</code> to your blog post if you’ve made modifications. Now, the sorting behavior of the posts is slightly different. All posts are sorted by both <code>pubDatetime</code> and <code>modDatetime</code>. If a post has both a <code>pubDatetime</code> and <code>modDatetime</code>, its sorting position will be determined by the <code>modDatetime</code>. If not, only <code>pubDatetime</code> will be considered to determine the post’s sorting order.</p>
<h3 id="implement-back-to-top-button-188">Implement Back-to-Top Button <a href="https://github.com/satnaing/astro-paper/pull/188">#188</a></h3>
<p>Enhance user navigation on your blog detail post with the newly implemented back-to-top button.</p>
<p><img src="https://github.com/satnaing/astro-paper/assets/53733092/79854957-7877-4f19-936e-ad994b772074" alt="Back to top button in AstroPaper"></p>
<h3 id="add-pagination-in-tag-posts-201">Add Pagination in Tag Posts <a href="https://github.com/satnaing/astro-paper/pull/201">#201</a></h3>
<p>Improve content organization and navigation with the addition of pagination in tag posts, making it easier for users to explore related content. This ensures that if a tag has many posts, readers won’t be overwhelmed by all the tag-related posts.</p>
<video autoplay loop muted plays-inline="true" class="border border-skin-line">
  <source src="https://github.com/satnaing/astro-paper/assets/53733092/9bad87f5-dcf5-4b79-b67a-d6c7244cd616" type="video/mp4">
</video>
<h3 id="dynamically-generate-robotstxt-130">Dynamically Generate robots.txt <a href="https://github.com/satnaing/astro-paper/pull/130">#130</a></h3>
<p>AstroPaper v4 now dynamically generates the robots.txt file, giving you more control over search engine indexing and web crawling. Besides, sitemap URL will also be added inside <code>robot.txt</code> file.</p>
<h3 id="add-docker-compose-file-174">Add Docker-Compose File <a href="https://github.com/satnaing/astro-paper/pull/174">#174</a></h3>
<p>Managing your AstroPaper environment is now easier than ever with the addition of a Docker-Compose file, simplifying deployment and configuration.</p>
<h2 id="refactoring--bug-fixes">Refactoring &#x26; Bug Fixes</h2>
<h3 id="replace-slugified-title-with-unslugified-tag-name-198">Replace Slugified Title with Unslugified Tag Name <a href="https://github.com/satnaing/astro-paper/pull/198">#198</a></h3>
<p>To improve clarity, user experience and SEO, titles (<code>Tag: some-tag</code>) in tag page are no longer slugified (<code>Tag: Some Tag</code>).</p>
<p><img src="https://github.com/satnaing/astro-paper/assets/53733092/2fe90d6e-ec52-467b-9c44-95009b3ae0b7" alt="Unslugified Tag Names"></p>
<h3 id="implement-100svh-for-min-height-79d569d">Implement 100svh for Min-Height (<a href="https://github.com/satnaing/astro-paper/commit/79d569d053036f2113519f41b0d257523d035b76">79d569d</a>)</h3>
<p>We’ve updated the min-height on the body to use 100svh, offering a better UX for mobile users.</p>
<h3 id="update-site-url-as-single-source-of-truth-143">Update Site URL as Single Source of Truth <a href="https://github.com/satnaing/astro-paper/pull/143">#143</a></h3>
<p>The site URL is now a single source of truth, streamlining configuration and avoiding inconsistencies. Read more at this <a href="https://github.com/satnaing/astro-paper/pull/143">PR</a> and its related issue(s).</p>
<h3 id="solve-invisible-text-code-block-issue-in-light-mode-163">Solve Invisible Text Code Block Issue in Light Mode <a href="https://github.com/satnaing/astro-paper/pull/163">#163</a></h3>
<p>We’ve fixed the invisible text code block issue in light mode.</p>
<h3 id="decode-unicode-tag-characters-in-breadcrumb-175">Decode Unicode Tag Characters in Breadcrumb <a href="https://github.com/satnaing/astro-paper/pull/175">#175</a></h3>
<p>The last part of Tag in the breadcrumb is now decoded, making non-English Unicode characters display better.</p>
<h3 id="update-locale-config-to-cover-overall-locales-cd02b04">Update LOCALE Config to Cover Overall Locales (<a href="https://github.com/satnaing/astro-paper/commit/cd02b047d2b5e3b4a2940c0ff30568cdebcec0b8">cd02b04</a>)</h3>
<p>The LOCALE configuration has been updated to cover a broader range of locales, catering to a more diverse audience.</p>
<h2 id="outtro">Outtro</h2>
<p>We believe these updates will significantly elevate your AstroPaper experience. Thank you to everyone who contributed, solved issues, and gave stars to AstroPaper. We look forward to seeing the amazing content you create with AstroPaper v4!</p>
<p>Happy Blogging!</p>
<p><a href="https://satnaing.dev">Sat Naing</a> <br>
Creator of AstroPaper</p> </article> </div> <!-- Table of Contents Sidebar --> <div class="hidden lg:block w-64 flex-shrink-0"> <div class="sticky top-8"> <h3 class="text-lg font-semibold text-foreground mb-4">Mục lục</h3> <div id="toc" class="text-sm text-muted-foreground space-y-2"> <!-- TOC will be generated by JavaScript --> </div> </div> </div> </div> <hr class="my-8 border-dashed"> <a href="https://github.com/satnaing/astro-paper/edit/main/src/data/blog/_releases/astro-paper-4.md" target="_blank" rel="noopener noreferrer" class="flex justify-baseline gap-1.5 opacity-80 hover:text-accent sm:hidden"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" /><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" /><path d="M16 5l3 3" /></svg><span>Edit page</span></a> <ul class="mt-4 mb-8 sm:my-8"> <li class="inline-block hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/release/" class="relative pe-2 text-lg underline decoration-dashed hover:-top-0.5 hover:text-accent focus-visible:p-1 focus-visible:no-underline text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -me-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>release</span> </a> </li> </ul> <div id="btt-btn-container" class="fixed end-4 bottom-8 z-50 md:sticky md:end-auto md:float-end md:me-1 translate-y-14 opacity-0 transition duration-500"> <button data-button="back-to-top" class="relative bg-background px-2 py-1 size-14 rounded-full shadow-xl md:h-8 md:w-fit md:rounded-md md:shadow-none md:focus-visible:rounded-none md:bg-background/35 md:bg-clip-padding md:backdrop-blur-lg"> <span id="progress-indicator" class="absolute inset-0 -z-10 block size-14 scale-110 rounded-full bg-transparent md:hidden md:h-8 md:rounded-md"></span> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block rotate-90 md:hidden"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <span class="sr-only text-sm hover:text-accent md:not-sr-only"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 5l0 14" /><path d="M16 9l-4 -4" /><path d="M8 9l4 -4" /></svg>
Back To Top
</span> </button> </div> <script data-astro-rerun>
  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    const rootElement = document.documentElement;
    const btnContainer = document.querySelector("#btt-btn-container");
    const backToTopBtn = document.querySelector("[data-button='back-to-top']");
    const progressIndicator = document.querySelector("#progress-indicator");

    if (!rootElement || !btnContainer || !backToTopBtn || !progressIndicator)
      return;

    // Attach click event handler for back-to-top button
    backToTopBtn.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });

    // Handle button visibility according to scroll position
    let lastVisible = null;
    function handleScroll() {
      const scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;
      const scrollTop = rootElement.scrollTop;
      const scrollPercent = Math.floor((scrollTop / scrollTotal) * 100);

      progressIndicator.style.setProperty(
        "background-image",
        `conic-gradient(var(--accent), var(--accent) ${scrollPercent}%, transparent ${scrollPercent}%)`
      );

      const isVisible = scrollTop / scrollTotal > 0.3;

      if (isVisible !== lastVisible) {
        btnContainer.classList.toggle("opacity-100", isVisible);
        btnContainer.classList.toggle("translate-y-0", isVisible);
        btnContainer.classList.toggle("opacity-0", !isVisible);
        btnContainer.classList.toggle("translate-y-14", !isVisible);
        lastVisible = isVisible;
      }
    }

    let ticking = false;
    document.addEventListener("scroll", () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          handleScroll();
          ticking = false;
        });
        ticking = true;
      }
    });
  }
  backToTop();
</script> <div class="flex flex-none flex-col items-center justify-center gap-1 md:items-start"><span class="italic">Share this post on:</span><div class="text-center"><a href="https://wa.me/?text=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via WhatsApp"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg><span class="sr-only">Share this post via WhatsApp</span></a><a href="https://www.facebook.com/sharer.php?u=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Facebook"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg><span class="sr-only">Share this post on Facebook</span></a><a href="https://x.com/intent/post?url=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on X"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg><span class="sr-only">Share this post on X</span></a><a href="https://t.me/share/url?url=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via Telegram"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg><span class="sr-only">Share this post via Telegram</span></a><a href="https://pinterest.com/pin/create/button/?url=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Pinterest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 20l4 -9" /><path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg><span class="sr-only">Share this post on Pinterest</span></a><a href="mailto:?subject=See%20this%20post&#38;body=https://astro-paper.pages.dev/posts/astro-paper-v4/" class="inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via email"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg><span class="sr-only">Share this post via email</span></a></div></div> <hr class="my-6 border-dashed"> <!-- Copyright --> <div class="mt-8 text-center text-sm text-muted-foreground"> <span>Copyright © 2025 | All rights reserved.</span> </div> <!-- Previous/Next Post Buttons --> <div data-pagefind-ignore class="grid grid-cols-1 gap-6 sm:grid-cols-2"> <a href="/posts/w3-data-structure-graph" class="flex w-full gap-1 hover:opacity-75"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <div> <span>Previous Post</span> <div class="text-sm text-accent/85">Khám phá Lập trình hướng đối tượng (OOP): Từ Nền Tảng đến Các Khái Niệm Nâng Cao</div> </div> </a> <a href="/posts/predefined-color-schemes" class="flex w-full justify-end gap-1 text-end hover:opacity-75 sm:col-start-2"> <div> <span>Next Post</span> <div class="text-sm text-accent/85">Predefined color schemes</div> </div> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 6l6 6l-6 6" /></svg> </a> </div> </div> </main>  <!-- Force light theme and clear cache --> <script>
      // Force light theme on page load
      document.documentElement.setAttribute('data-theme', 'light');
      
      // Clear all cached data
      localStorage.clear();
      sessionStorage.clear();
      
      // Clear any cached theme preferences
      if (localStorage.getItem('theme') === 'dark') {
        localStorage.setItem('theme', 'light');
      }
      
      // Override any theme toggle that might set dark theme
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
            if (document.documentElement.getAttribute('data-theme') === 'dark') {
              document.documentElement.setAttribute('data-theme', 'light');
            }
          }
        });
      });
      
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
      });
      
      // Force refresh if coming from cache
      if (performance.navigation.type === 2) {
        window.location.reload();
      }
      
      // Force refresh every 5 seconds to clear cache
      setTimeout(() => {
        if (document.querySelector('*[data-theme="dark"]')) {
          window.location.reload();
        }
      }, 5000);
      
      // Clear cache for all resources
      if ('caches' in window) {
        caches.keys().then(function(names) {
          for (let name of names) {
            caches.delete(name);
          }
        });
      }
      
      // Force reload if undefined text found
      setTimeout(() => {
        if (document.body.innerText.includes('undefined')) {
          window.location.reload();
        }
      }, 2000);
    </script> </body> </html>  <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-background";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("heading-group");
      const link = document.createElement("a");
      link.className =
        "heading-link ms-2 no-underline opacity-75 md:opacity-0 md:hover:opacity-100 md:focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      const copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute end-3 top-3 rounded bg-muted/80 px-2 py-1 text-xs leading-4 text-foreground font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );

  /* Generate Table of Contents */
  function generateTOC() {
    const tocContainer = document.getElementById('toc');
    if (!tocContainer) return;

    const headings = document.querySelectorAll('h2, h3, h4, h5, h6');
    if (headings.length === 0) {
      tocContainer.innerHTML = '<p class="text-muted-foreground">Không có mục lục</p>';
      return;
    }

    let tocHTML = '<ul class="space-y-1">';
    headings.forEach((heading, index) => {
      const level = parseInt(heading.tagName.charAt(1));
      const text = heading.textContent.trim();
      const id = heading.id || `heading-${index}`;
      
      // Add id if not exists
      if (!heading.id) {
        heading.id = id;
      }

      const indent = level > 2 ? `ml-${(level - 2) * 4}` : '';
      tocHTML += `
        <li class="${indent}">
          <a href="#${id}" class="hover:text-accent transition-colors block py-1">
            ${text}
          </a>
        </li>
      `;
    });
    tocHTML += '</ul>';
    
    tocContainer.innerHTML = tocHTML;
  }

  // Generate TOC on page load
  generateTOC();
  
  // Regenerate TOC after page swap
  document.addEventListener("astro:after-swap", generateTOC);
</script>