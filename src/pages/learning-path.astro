---
import BlockLayout from "../layouts/BlockLayout.astro";
import NavigationBlock from "../components/blocks/NavigationBlock.astro";

const modules = [
  {
    id: 1,
    title: "Module 1 - Fundamental Math and Programming",
    status: "completed",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Basic Python (Branching~Rule based Chatbot)", link: "/posts/module1/w1-basic-python-branching" },
          { title: "Database SQL (1)", link: "/posts/module1/w1-database-sql-1" },
          { title: "Basic Python (String and Loops~Text preprocessing)", link: "/posts/module1/w1-basic-python-loops" },
          { title: "Coding Methodology", link: "/posts/module1/w1-coding-methodology" },
          { title: "TA Exercise (activation functions)", link: "/posts/module1/w1-ta-exercise-activation" }
        ]
      },
      {
        week: "Week 2",
        lessons: [
          { title: "List", link: "/posts/module1/w2-list" },
          { title: "Data Structure (list~IoU, Top K Searching)", link: "/posts/module1/w2-list-advanced" },
          { title: "Database SQL (2)", link: "/posts/module1/w2-database-sql-2" },
          { title: "Data Structure (Non maximum supression and Histogram)", link: "/posts/module1/w2-datastructure" },
          { title: "Git&Github for Version Control", link: "/posts/module1/w2-git-github" },
          { title: "TA Exercise (Word Suggestion)", link: "/posts/module1/w2-exercise" }
        ]
      },
      {
        week: "Week 3",
        lessons: [
          { title: "Classes and Objects", link: "/posts/module1/w3-classes-objects" },
          { title: "Data Structure (Graph and Tree)", link: "/posts/module1/w3-data-structure-graph" },
          { title: "Database SQL (3)", link: "/posts/module1/w3-database-sql-3" },
          { title: "OOP with Python (Custom PyTorch Class)", link: "/posts/module1/w3-oop-pytorch" },
          { title: "TA Exercise (OOP)", link: "/posts/module1/w3-ta-exercise-oop" }
        ]
      },
      {
        week: "Week 4",
        lessons: [
          { title: "Project 1.1: Basic Web and Streamlit for Simple Deployment", link: "/posts/module1/w4-project-1-1" },
          { title: "Unix&Linux", link: "/posts/module1/w4-unix-linux" },
          { title: "Project 1.2: Tạo và triển khai một chatbot cho một chủ đề cá nhân", link: "/posts/module1/w4-project-1-2" }
        ]
      }
    ]
  },
  {
    id: 2,
    title: "Module 2 - Advanced Math and Programming",
    status: "in-progress",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Numpy array 2d 3d data representation", link: "/posts/module2/m2-w2-numpy" },
          { title: "Database-NoSQL", link: "/posts/module2/m2-w1-nosql-mongodb" },
          { title: "Linear Algebra Applications", link: "/posts/module2/m2-w2-linearalgebra" },
          { title: "Logical thinking and problem solving in AI", link: "/posts/module2/m2-w1-logicalthinking" },
          { title: "TA Exercise", link: "/posts/module2/m2-w2-exercise" }
        ]
      }
    ]
  },
  {
    id: 3,
    title: "Module 3 - Basic Machine Learning",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 4,
    title: "Module 4 - Advanced Machine Learning",
    status: "in-progress",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Random Forest Study - Thuật toán Ensemble Learning với Bootstrap Aggregating", link: "/posts/module4/m4-w1-random-forest-study" },
          { title: "Random Forest Proximity - Quy trình đầy đủ từ Missing Values đến Proximity Matrix", link: "/posts/module4/m4-w1-random-forest-proximity" },
          { title: "Random Forest Regression - Thuật toán Ensemble Learning cho Regression", link: "/posts/module4/m4-w2-random-forest-regression" }
        ]
      },
      {
        week: "Week 2",
        lessons: [
          { title: "Gradient Boosting Study - Thuật toán Gradient Boosting từ cơ bản đến nâng cao", link: "/posts/module4/m4-w2-gradient-boosting-study" },
          { title: "Gradient Boosting Classification - Thuật toán Gradient Boosting cho Classification", link: "/posts/module4/m4-w2-gradient-boosting-classification" },
          { title: "AdaBoost Study - Thuật toán Adaptive Boosting", link: "/posts/module4/m4-w2-adaboost-study" },
          { title: "AdaBoost Regression - Thuật toán Adaptive Boosting cho Regression", link: "/posts/module4/m4-w2-adaboost-regression-detailed" },
          { title: "Behind The Scene của XGBoost", link: "/posts/module4/m4-w2-xgboost" }
        ]
      },
      {
        week: "Week 3",
        lessons: [
          { title: "XGBoost Classification - Thuật toán Gradient Boosting cho Classification", link: "/posts/module4/m4-w3-xgboost-classification" },
          { title: "LightGBM Classification - Thuật toán Gradient Boosting hiệu quả cho Classification", link: "/posts/module4/m4-w3-lightgbm-classification" },
          { title: "LightGBM Study - Thuật toán Gradient Boosting hiệu quả", link: "/posts/module4/m4-w3-lightgbm-study" },
          { title: "CatBoost Study  ", link: "/posts/module4/m4-w3-catboost-classification" }
        ]
      }
    ]
  },
  {
    id: 5,
    title: "Module 5 - Steps into Deep Learning (1)",
    status: "in-progress",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Bridge to Linear Regression", link: "/posts/module5/m5-w1-bridge-to-linear-regression" },
          { title: "XAI-LIME", link: "/posts/module5/m5-w1-lime" },
          { title: "Data Version Control", link: "/posts/module5/m5-w1-dataversioncontrol" },
          { title: "Road to Linear Regression", link: "/posts/module5/m5-w1-roadintolinearegression" }
        ]
      },
      {
        week: "Week 2",
        lessons: [
        { title: "Loss Function And Regularization", link: "/posts/module5/m5-w2-loss" },
        { title: "Feast MLOps", link: "/posts/module5/m5-w2-feast" },
        { title: "Vectorization Linear Regression", link: "/posts/module5/m5-w2-vecorization" }

        ]
      }
    ]
  },
  {
    id: 6,
    title: "Module 6 - Steps into Deep Learning (2)",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 7,
    title: "Module 7 - Deep Learning (1)",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 8,
    title: "Module 8 - Deep Learning (2)",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 9,
    title: "Module 9 - Deep Learning Applications for Images",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 10,
    title: "Module 10 - Deep Learning Applications for Text",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 11,
    title: "Module 11 - Generative Models & GANs",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  },
  {
    id: 12,
    title: "Module 12 - LLMs & RL & 3D CV",
    status: "not-started",
    weeks: [
      {
        week: "Week 1",
        lessons: [
          { title: "Coming Soon", link: "#" }
        ]
      }
    ]
  }
];

const getStatusColor = (status: string) => {
  switch(status) {
    case 'completed': return '#10b981';
    case 'in-progress': return '#f59e0b';
    case 'not-started': return '#6b7280';
    default: return '#6b7280';
  }
};

const getStatusText = (status: string) => {
  switch(status) {
    case 'completed': return '✅ Hoàn thành';
    case 'in-progress': return '🔄 Đang học';
    case 'not-started': return '⏳ Chưa bắt đầu';
    default: return '⏳ Chưa bắt đầu';
  }
};
---

<BlockLayout 
  title="Learning Path - AI & Machine Learning"
  description="Lộ trình học tập toàn diện về AI & Machine Learning từ cơ bản đến nâng cao"
>
  <NavigationBlock />
  <main class="min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-foreground mb-4">
        🚀 Learning Path
      </h1>
      <p class="text-xl text-muted-foreground">
        Quá trình học tập của mình
      </p>
    </div>

    <!-- Progress Overview -->
    <div class="bg-muted/20 border border-border rounded-lg p-8 mb-8">
      <h2 class="text-2xl font-semibold text-foreground mb-4">📊 Tổng quan tiến độ</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="text-center">
          <div class="text-3xl font-bold text-accent">{modules.length}</div>
          <div class="text-muted-foreground">Modules</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-yellow-500">{modules.filter(m => m.status === 'in-progress').length}/{modules.length}</div>
          <div class="text-muted-foreground">Module đang học</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-green-500">{modules.reduce((sum, m) => sum + (m.weeks ? m.weeks.reduce((s, w) => s + w.lessons.length, 0) : 0), 0)}</div>
          <div class="text-muted-foreground">Bài học</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-purple-500">{modules.reduce((sum, m) => sum + (m.weeks ? m.weeks.length : 0), 0)}</div>
          <div class="text-muted-foreground">Tuần</div>
        </div>
      </div>
    </div>

    <!-- Modules -->
    <div class="space-y-6">
      {modules.map((mod) => (
        <div class="bg-background border-2 border-border rounded-xl overflow-hidden hover:border-accent/50 hover:shadow-lg transition-all duration-300 shadow-sm">
          <div class="p-8">
            <div class="flex items-start justify-between mb-4">
              <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                  <span class="text-2xl font-bold text-muted-foreground">#{mod.id}</span>
                  <h3 class="text-xl font-semibold text-foreground">{mod.title}</h3>
                </div>
                
                <div class="flex items-center gap-4 text-sm text-muted-foreground mb-4">
                  <span class="flex items-center gap-1" style={`color: ${getStatusColor(mod.status)}`}>
                    {getStatusText(mod.status)}
                  </span>
                  {mod.weeks && (
                    <span class="flex items-center gap-1">
                      📅 {mod.weeks.length} tuần
                    </span>
                  )}
                  {mod.weeks && (
                    <span class="flex items-center gap-1">
                      📚 {mod.weeks.reduce((total, week) => total + week.lessons.length, 0)} bài học
                    </span>
                  )}
                </div>

                <!-- Hiển thị weeks cho mọi module có weeks -->
                {mod.weeks ? (
                  <div class="space-y-4 w-full">
                    {mod.weeks.map((week) => (
                      <details class="bg-muted/20 border border-border rounded-lg overflow-hidden w-full hover:border-accent/30 transition-colors">
                        <summary class="p-4 cursor-pointer hover:bg-muted/30 transition-colors w-full">
                          <div class="flex items-center justify-between w-full">
                            <h4 class="text-lg font-semibold text-foreground">{week.week}</h4>
                            <span class="text-sm text-muted-foreground">{week.lessons.length} bài học</span>
                          </div>
                        </summary>
                        <div class="p-4 pt-0 w-full">
                          <div class="grid gap-2 w-full">
                            {week.lessons.map((lesson) => (
                              <a 
                                href={lesson.link}
                                class="block p-3 bg-background border border-border rounded-md hover:border-accent/50 hover:bg-accent/5 transition-all duration-200 text-foreground text-sm w-full"
                              >
                                <div class="flex items-center gap-2 w-full">
                                  <span class="w-2 h-2 bg-accent rounded-full"></span>
                                  {lesson.title}
                                </div>
                              </a>
                            ))}
                          </div>
                        </div>
                      </details>
                    ))}
                  </div>
                ) : (
                  <p class="text-muted-foreground mb-4 w-full">{mod.description}</p>
                )}
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 w-full">
              {mod.status === 'not-started' && (
                <button class="px-4 py-2 bg-accent hover:bg-accent/80 text-background rounded-md text-sm font-medium transition-colors">
                  Bắt đầu học
                </button>
              )}
              {mod.status === 'in-progress' && (
                <button class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-background rounded-md text-sm font-medium transition-colors">
                  Tiếp tục học
                </button>
              )}
              {mod.status === 'completed' && (
                <button class="px-4 py-2 bg-green-500 hover:bg-green-600 text-background rounded-md text-sm font-medium transition-colors">
                  Xem lại
                </button>
              )}
              <button class="px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-md text-sm font-medium transition-colors">
                Chi tiết
              </button>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Footer -->
    <div class="mt-12 text-center w-full">
      <div class="bg-muted/20 border border-border rounded-xl p-6 w-full">
        <h3 class="text-xl font-semibold text-foreground mb-3">💡 Lời khuyên học tập</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-muted-foreground w-full">
          <div class="text-left w-full">
            <p class="font-medium text-foreground mb-2">🎯 Mục tiêu:</p>
            <ul class="space-y-1">
              <li>• Học đều đặn 2-3 giờ/ngày</li>
              <li>• Thực hành code thường xuyên</li>
              <li>• Làm project để áp dụng kiến thức</li>
            </ul>
          </div>
          <div class="text-left w-full">
            <p class="font-medium text-foreground mb-2">📈 Tiến độ:</p>
            <ul class="space-y-1">
              <li>• Hoàn thành từng module trước khi chuyển sang module tiếp theo</li>
              <li>• Ôn tập kiến thức cũ định kỳ</li>
              <li>• Tham gia cộng đồng để học hỏi</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Copyright at bottom -->
    <div class="mt-16 text-center text-sm text-muted-foreground">
      <span>Copyright © 2025 | All rights reserved.</span>
    </div>
    </div>
  </main>
</BlockLayout>
